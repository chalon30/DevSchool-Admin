<div class="max-w-5xl mx-auto px-4 py-10">

  <!-- Loader -->
  <div *ngIf="cargando" class="flex flex-col items-center justify-center py-20 gap-4">
    <div
      class="h-10 w-10 rounded-full border-4 border-slate-600 border-t-indigo-400 animate-spin"
    ></div>
    <p class="text-slate-200 text-sm md:text-base">
      Cargando cursos e inscritos...
    </p>
  </div>

  <!-- Contenido -->
  <ng-container *ngIf="!cargando">

    <!-- Card principal -->
    <div
      class="bg-slate-900/80 backdrop-blur border border-slate-700/60 rounded-2xl shadow-2xl px-5 py-6 md:px-8 md:py-8"
    >
      <!-- Header -->
      <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-3">
        <div>
          <h2 class="text-xl md:text-2xl font-semibold text-slate-50">
            Cursos y usuarios inscritos
          </h2>
          <p class="text-sm text-slate-400">
            Vista general de los cursos activos y sus participantes.
          </p>
        </div>

        <div *ngIf="cursos?.length" class="flex items-center">
          <span
            class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium
                   bg-slate-800/80 border border-slate-600/70 text-slate-200"
          >
            {{ cursos.length }} curso{{ cursos.length > 1 ? 's' : '' }}
          </span>
        </div>
      </div>

      <!-- Tabla o estado vacío -->
      <ng-container *ngIf="cursos?.length; else sinCursos">

        <div class="mt-5 overflow-x-auto">
          <table class="min-w-full text-sm text-left text-slate-200">
            <thead>
              <tr class="bg-slate-800/90">
                <th class="px-4 py-3 text-xs font-semibold uppercase tracking-wide">
                  Curso
                </th>
                <th class="px-4 py-3 text-xs font-semibold uppercase tracking-wide">
                  Usuarios inscritos
                </th>
              </tr>
            </thead>

            <tbody>
              <tr
                *ngFor="let curso of cursos"
                class="border-b border-slate-800/80 hover:bg-slate-800/70 transition-colors"
              >
                <!-- Curso -->
                <td class="px-4 py-3 align-top">
                  <div class="flex flex-col">
                    <span class="font-medium text-slate-50">
                      {{ curso.titulo }}
                    </span>
                    <span class="text-[11px] text-slate-400 mt-0.5">
                      ID: {{ curso.id }}
                    </span>
                  </div>
                </td>

                <!-- Usuarios inscritos: solo cantidad -->
                <td class="px-4 py-3 align-top">
                  <ng-container
                    *ngIf="inscritosPorCurso[curso.id]?.length as total; else sinInscritos"
                  >
                    <span
                      class="inline-flex px-3 py-1 rounded-full text-xs font-semibold
                             bg-indigo-500/15 border border-indigo-400/70 text-indigo-200"
                    >
                      {{ total }} usuario{{ total === 1 ? '' : 's' }}
                    </span>
                  </ng-container>

                  <ng-template #sinInscritos>
                    <span
                      class="inline-flex px-2.5 py-0.5 rounded-full text-xs
                             bg-slate-700/60 border border-slate-600/70 text-slate-300"
                    >
                      Ninguno
                    </span>
                  </ng-template>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

      </ng-container>

      <!-- Estado vacío -->
      <ng-template #sinCursos>
        <div class="mt-8 text-center">
          <p class="text-slate-200 font-medium">
            Aún no hay cursos registrados
          </p>
          <p class="text-sm text-slate-400 mt-1">
            Cuando se creen cursos, podrás ver aquí a los usuarios inscritos.
          </p>
        </div>
      </ng-template>
    </div>

  </ng-container>
</div>
